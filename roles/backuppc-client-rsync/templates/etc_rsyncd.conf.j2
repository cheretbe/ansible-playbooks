# Generated by Ansible at {{ lookup('pipe', 'hostname -f') }}
# Any changes made here will be overwritten

pid file = /var/run/rsyncd.pid
read only = yes
list = yes
auth users = {{ backuppc_client_rsync_user_name }}
secrets file = /etc/rsyncd.secrets
{% if backuppc_client_rsync_address is defined %}
address = {{ backuppc_client_rsync_address }}
{% endif %}
{% if backuppc_client_rsync_hosts_allow is defined %}
hosts allow = {{ backuppc_client_rsync_hosts_allow }}
{% endif %}

[etc]
path = /etc
uid = root

[home]
path = /home
uid = root

[root]
path = /root
uid = root

[usr_local]
path = /usr/local
uid = root
{# Custom modules #}
{% if backuppc_client_rsync_custom_modules is defined %}
{% for custom_module in backuppc_client_rsync_custom_modules %}

[{{ custom_module.name }}]
{% for key, value in custom_module.settings.items() | list %}
{{ key }} = {{ value }}
{% endfor %}
{% endfor %}
{% endif %}
