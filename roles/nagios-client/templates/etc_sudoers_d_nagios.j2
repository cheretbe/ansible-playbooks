# Generated by Ansible at {{ lookup('pipe', 'hostname -f') }}
# Any changes made here will be overwritten

{# Physical machines only #}
{% if ansible_virtualization_role != "guest" %}
# Allow NRPE process smart parameters access
nagios ALL=(root)NOPASSWD:/usr/sbin/smartctl
{% endif -%}

{% if nagios_client_zfs_checks %}
# Allow NRPE process ZFS pool status access
nagios  ALL=NOPASSWD: /var/lib/nagios/nagios-plugins/check_zpools/check_zpools.sh -p ALL -w 80 -c 90

# Allow NRPE process sanoid monitoring commands access
nagios ALL=NOPASSWD: /opt/sanoid/sanoid --monitor-health
nagios ALL=NOPASSWD: /opt/sanoid/sanoid --monitor-snapshots
{% endif %}
